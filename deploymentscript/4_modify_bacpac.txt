/*
 *
 * Encrypt Firstname column in dbo.patients, see DDL below. Then create new dacpac
 * /

CREATE TABLE [dbo].[Patients] (
    [PatientId]     INT           IDENTITY (1, 1) NOT NULL,
    [SSN]           CHAR (11)     COLLATE Latin1_General_BIN2  ENCRYPTED WITH (
     COLUMN_ENCRYPTION_KEY = [CEK_Auto1],
     ALGORITHM = N'AEAD_AES_256_CBC_HMAC_SHA_256',
     ENCRYPTION_TYPE = DETERMINISTIC
    ) NOT NULL,
    [FirstName]     NVARCHAR (50) COLLATE Latin1_General_BIN2  ENCRYPTED WITH (
        COLUMN_ENCRYPTION_KEY = [CEK_Auto1],
        ALGORITHM = N'AEAD_AES_256_CBC_HMAC_SHA_256',
        ENCRYPTION_TYPE = DETERMINISTIC
       ) NULL,
    [LastName]      NVARCHAR (50) NULL,
    [MiddleName]    NVARCHAR (50) NULL,
    [StreetAddress] NVARCHAR (50) NULL,
    [City]          NVARCHAR (50) NULL,
    [ZipCode]       CHAR (5)      NULL,
    [State]         CHAR (2)      NULL,
    [FootballClub]  NVARCHAR (50) NULL,
    [BirthDate]     DATE  ENCRYPTED WITH (
     COLUMN_ENCRYPTION_KEY = [CEK_Auto1],
     ALGORITHM = N'AEAD_AES_256_CBC_HMAC_SHA_256',
     ENCRYPTION_TYPE = RANDOMIZED
    )                             NOT NULL,
    PRIMARY KEY CLUSTERED ([PatientId] ASC)
);